 串行处理

Thread.sleep 让程序睡眠

currenThread（）获取当前线程



## 4.1 什么是线程  ## 
 进程是指运行中的应用程序，每个进程都有自己独立的地址空间(内存空间)，比如用户点击桌面的IE浏览器，就启动了一个进程，操作系统就会为该进程分配独立的地址空间。当用户再次点击左面的IE浏览器，又启动了一个进程，操作系统将为新的进程分配新的独立的地址空间。目前操作系统都支持多进程。

要点：用户每启动一个进程，操作系统就会为该进程分配一个独立的内存空间。

是进程中的一个实体，是被系统独立调度和分派的基本单位，线程自己不拥有系统资源，只拥有一点在运行中必不可少的资源，但它可与同属一个进程的其它线程共享进程所拥有的全部资源。一个线程可以创建和撤消另一个线程，同一进程中的多个线程之间可以并发执行。线程有就绪、阻塞和运行三种基本状态。

1、线程是轻量级的进程

2、线程没有独立的地址空间(内存空间)

3、线程是由进程创建的(寄生在进程)

4、一个进程可以拥有多个线程-->这就是我们常说的多线程编程

5、线程有几种状态：

    a、新建状态(new)

    b、就绪状态(Runnable)

    c、运行状态(Running)

    d、阻塞状态(Blocked)

    e、死亡状态(Dead)

**线程有什么用处**

java程序中流传一句话，不会使用线程就别跟别人说自己学过java。目前绝大部分应用程序都会涉及到多并发的问题。只要应用程序涉及到并发，就离不开多线程编程。

## 4.2 线程和进程有什么区别   ##

（1）线程是CPU独立运行和独立调度的基本单位；  
（2）进程是资源分配的基本单位；  
两者的联系：进程和线程都是操作系统所运行的程序运行的基本单元。 
 
区别：  
（1）进程具有独立的空间地址，一个进程崩溃后，在保护模式下不会对其它进程产生影响。  
（2）线程只是一个进程的不同执行路径，线程有自己的堆栈和局部变量，但线程之间没有单独的地址空间，一个线程死掉就等于整个进程死掉。


## 4.3 如何在 Java 中使用新线程   ##
1、继承Thread类，并重写run函数

2、实现Runnable接口，并重写run函数

因为java是单继承的，在某些情况下一个类可能已经继承了某个父类，这时在用继承Thread类方法来创建线程显然不可能java设计者们提供了另外一个方式创建线程，就是通过实现Runnable接口来创建线程。


## 4.4 start() 和 run() 有什么区别   ##
t1.run();    
1、 只是调用了一个普通方法，并没有启动另一个线程，程序还是会按照顺序执行相应的代码。   
2、该方法和普通的方法一样，可以重复执行，不会创建新的线程。  
t1.start();   
1、 则表示，重新开启一个线程，不必等待其他线程运行完，只要得到cup就可以运行该线程。  
2、该方法是在当前线程中启动一个新的线程，而新启动的线程会调用run()方法，同时该方法不能重复调用；

## 4.5 Thread.join 方法有什么用 ##  
　　1、Thread类中的join方法的主要作用就是同步，它可以使得线程之间的并行执行变为串行执行  
   2、在A线程中调用了B线程的join()方法时，表示只有当B线程执行完毕时，A线程才能继续执行

## 4.6 假如新建T1、T2、T3三个线程，如何保证它们按顺序执行？ ##  

## 4.7 volatile 变了是做什么的  


## 4.8 如果一个线程中发生了异常会怎么样   ##
出现Error的情况下，程序会停止运行。


① 如果该异常被捕获或抛出，则程序继续运行。   
② 如果异常没有被捕获该线程将会停止执行。

## 4.9 什么是 ThreadLocal 变量   ##
ThreadLocal是线程局部变量，所谓的线程局部变量，就是仅仅只能被本线程访问，不能在线程之间进行共享访问的变量。

**ThreadLocal的简单方法：**

ThreadLocal有两个简单的方法，一个set（）方法，一个get（）方法


## 4.10 什么是线程池，为什么要使用   ## ##

 1 、对那些生存周期比较短的线程来说，使用线程池来处理任务要比为每个任务都创建一个线程然后顺序地回收它们要高效得多。一个任务，在概念上说，可以是一个单一方法的执行过程或者一系列方法的执行过程。为一个线程预分配一个集合或者一个池来以备未来之需以及能够在一个应用程序中重用的技术称作线程池。

 2、线程池是指在初始化一个多线程应用程序过程中创建一个线程集合，然后在需要执行新的任务时重用这些线程而不是新建一个线程。线程池中线程的数量通常完全取决于可用内存数量和应用程序的需求。然而，增加可用线程数量是可能的。线程池中的每个线程都有被分配一个任务，一旦任务已经完成了，线程回到池子中并等待下一次分配任务。

获取线程池 ExecutorsService service =Executors.newFixedThreadPool(4)**后面的参数就是创建多少个线程**

基于以下几个原因在多线程应用程序中使用线程是必须的：

  1. 线程池改进了一个应用程序的响应时间。由于线程池中的线程已经准备好且等待被分配任务，应用程序可以直接拿来使用而不用新建一个线程。

  2. 线程池节省了CLR 为每个短生存周期任务创建一个完整的线程的开销并可以在任务完成后回收资源。

  3. 线程池根据当前在系统中运行的进程来优化线程时间片。

  4. 线程池允许我们开启多个任务而不用为每个线程设置属性。

  5. 线程池允许我们为正在执行的任务的程序参数传递一个包含状态信息的对象引用。

  6. 线程池可以用来解决处理一个特定请求最大线程数量限制问题。

## 4.11 Thread.sleep 和 wait 方法有什么不同   ##

对于sleep()方法，我们首先要知道该方法是属于Thread类中的。而wait()方法，则是属于Object类中的。

sleep()方法导致了程序暂停执行指定的时间，让出cpu该其他线程，但是他的监控状态依然保持者，当指定的时间到了又会自动恢复运行状态。

在调用sleep()方法的过程中，线程不会释放对象锁。

而当调用wait()方法的时候，线程会放弃对象锁，进入等待此对象的等待锁定池，只有针对此对象调用notify()方法后本线程才进入对象锁定池准备

获取对象锁进入运行状态。

## 4.12 synchronized 关键词是做什么的  ## 
在Java中，synchronized关键字是用来控制线程同步的，就是在多线程的环境下，控制synchronized代码段不被多个线程同时执行。synchronized既可以加在一段代码上，也可以加在方法上。